<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="OpenWIS_authorization_Test" resourceRoot="" soapui-version="4.5.2" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:testSuite name="authorization" id="d6a618f2-da4d-4109-8d97-110b49cc2497"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="authorization" searchProperties="true" id="17596c02-5c39-4991-b0e2-4952f63141cf"><con:settings/><con:testStep type="httprequest" name="login_avec_openAM"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" name="login_avec_openAM" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://wiss.meteo.fr/opensso/identity/authenticate</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>username</con:name><con:value>openwis</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>openwis</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value>audit910</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>audit910</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="transfer" name="TokenTransfer"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>versBadToken</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>login_avec_openAM</con:sourceStep><con:sourcePath>substring(//text(),10)</con:sourcePath><con:targetType>token</con:targetType><con:targetStep>CheckBadMetadata</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>versGoodToken</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>login_avec_openAM</con:sourceStep><con:sourcePath>substring(//text(),10)</con:sourcePath><con:targetType>token</con:targetType><con:targetStep>CheckGoodMetadata</con:targetStep><con:targetPath xsi:nil="true"/></con:transfers></con:config></con:testStep><con:testStep type="httprequest" name="CheckBadMetadata"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" name="CheckBadMetadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://${#TestCase#ServeurCible}/${#TestCase#Webapp}/srv/en/xml.CheckAuthorization</con:endpoint><con:request/><con:assertion type="XPath Match" name="XPath Match"><con:configuration><path>//allowed</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>token</con:name><con:value>AQIC5wM2LY4SfcznaqgA83+B7Oh8s09N+McDSTAvD1DFerw=@AAJTSQACMDE=#
</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>AQIC5wM2LY4Sfcybuc2GYsj0PnqxY4jkOC3ukJGuqXZYpyU=@AAJTSQACMDE=#</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>urn</con:name><con:value>titi</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>titi</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>idpUrl</con:name><con:value>http://wiss.meteo.fr/opensso/</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>http://wiss.meteo.fr/opensso/</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="CheckBadToken"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" name="CheckBadToken" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://${#TestCase#ServeurCible}/${#TestCase#Webapp}/srv/en/xml.CheckAuthorization</con:endpoint><con:request/><con:assertion type="XPath Match" name="XPath Match"><con:configuration><path>//allowed</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>token</con:name><con:value>MauvaisToken</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>AQIC5wM2LY4Sfcybuc2GYsj0PnqxY4jkOC3ukJGuqXZYpyU=@AAJTSQACMDE=#</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>urn</con:name><con:value>urn:x-wmo:md:fr.meteofrance.opendata::inspire_global_numerical_model_wmores40ess</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>titi</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>idpUrl</con:name><con:value>http://wiss.meteo.fr/opensso/</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>http://wiss.meteo.fr/opensso/</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters></con:config></con:testStep><con:testStep type="httprequest" name="CheckGoodMetadata"><con:settings/><con:config method="GET" xsi:type="con:HttpRequest" name="CheckGoodMetadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://${#TestCase#ServeurCible}/${#TestCase#Webapp}/srv/en/xml.CheckAuthorization</con:endpoint><con:request/><con:assertion type="XPath Match" name="XPath Match"><con:configuration><path>//CheckAuthorization</path><content><![CDATA[<CheckAuthorization>
  <allowed>true</allowed>
  <username>openwis</username>
</CheckAuthorization>]]></content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><con:parameter><con:name>token</con:name><con:value>AQIC5wM2LY4SfcznaqgA83+B7Oh8s09N+McDSTAvD1DFerw=@AAJTSQACMDE=#
</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>AQIC5wM2LY4Sfcybuc2GYsj0PnqxY4jkOC3ukJGuqXZYpyU=@AAJTSQACMDE=#</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>urn</con:name><con:value>urn:x-wmo:md:fr.meteofrance.opendata::inspire_global_numerical_model_wmores40ess</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>titi</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>idpUrl</con:name><con:value>http://wiss.meteo.fr/opensso/</con:value><con:style>QUERY</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default>http://wiss.meteo.fr/opensso/</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters></con:config></con:testStep><con:properties><con:property><con:name>ServeurCible</con:name><con:value>localhost:8080</con:value></con:property><con:property><con:name>Webapp</con:name><con:value>openwis-portal</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="authorization_integration" searchProperties="true" id="bd44450d-f996-405f-b94d-20874c1a6638"><con:settings/><con:testStep type="calltestcase" name="IntgAdmin"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>17596c02-5c39-4991-b0e2-4952f63141cf</con:targetTestCase><con:properties><con:property><con:name>ServeurCible</con:name><con:value>wisadm-p.meteo.fr:8080</con:value></con:property><con:property><con:name>Webapp</con:name><con:value>openwis-admin-portal</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="IntgUser"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>17596c02-5c39-4991-b0e2-4952f63141cf</con:targetTestCase><con:properties><con:property><con:name>ServeurCible</con:name><con:value>wisp.meteo.fr:8080</con:value></con:property><con:property><con:name>Webapp</con:name><con:value>openwis-user-portal</con:value></con:property></con:properties><con:returnProperties/><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties/><con:wssContainer/><con:sensitiveInformation/></con:soapui-project>